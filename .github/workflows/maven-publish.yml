# This workflow will build a package using Maven and then publish it to GitHub packages when a release is created
# For more information see: https://github.com/actions/setup-java/blob/main/docs/advanced-usage.md#apache-maven-with-a-settings-path

name: Add JAR to GitHub Release

on:
  release:
    types: [created]  # Trigger workflow when a new GitHub release is created

jobs:
  upload-jar:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v3  # Checkout the repository
      
      - name: Step 02. Build with Maven 
        run: mvn clean package
        
      - name: Upload JAR to GitHub Release
        uses: actions/upload-release-asset@v1
        with:
          upload_url: ${{ github.event.release.upload_url }}  # The upload URL from the created release
          asset_path: "target/testing-2024-1.0-SNAPSHOT.jar"  # Path to the JAR file
          asset_name: "testing-2024-1.0-SNAPSHOT.jar"  # Name of the JAR file on the release
          asset_content_type: "application/java-archive"  # MIME type for JAR files
